<!DOCTYPE html>
<html>
<head>
<title>Split PDF</title>
<style>
body{background:#0f2027;color:#fff;font-family:Segoe UI}
.container{max-width:520px;margin:70px auto;background:#203a43;padding:30px;border-radius:16px}
.back{color:#38bdf8;text-decoration:none}
input,button{width:100%;padding:14px;margin-top:12px;border-radius:12px;border:none}
button{background:#38bdf8;font-weight:bold}
.file-item{background:rgba(255,255,255,.08);padding:12px;border-radius:10px;margin-top:12px;display:flex;justify-content:space-between}
</style>
</head>
<body>

<div class="container">
<a class="back" href="/">← Back</a>
<h2>Split PDF</h2>

<input type="file" id="fileInput">
<div id="fileList"></div>

<input type="number" id="start" placeholder="Start Page">
<input type="number" id="end" placeholder="End Page">

<button onclick="split()">Split & Download</button>
</div>

<script>
let file=null;
fileInput.onchange=()=>{file=fileInput.files[0];render();}
function render(){
  fileList.innerHTML=file?`<div class="file-item">${file.name}
  <button onclick="remove()">❌</button></div>`:"";
}
function remove(){file=null;fileInput.value="";render();}
async function split(){
  if(!file)return alert("Select PDF");
  const fd=new FormData();
  fd.append("files",file);
  fd.append("startPage",start.value);
  fd.append("endPage",end.value);
  const res=await fetch("/api/pdf/split",{method:"POST",body:fd});
  const blob=await res.blob();
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download="split.pdf";a.click();
}
</script>
</body>
</html>
